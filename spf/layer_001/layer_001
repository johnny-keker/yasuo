#!/bin/bash

typing_speed=13

choice=0
where_are_you=1
what_is_here=2
create_place=3
travel=4
destroy=5
leave=6

function say {
  echo $1 | pv -qL $typing_speed
}

function ask {
  echo -n $1 | pv -qL $typing_speed
  read $2
}

function the_offer {
  say "--- Hello "$USER"! ---"
  echo
  say "This is extremely powerfull script,"
  say "and you are free to choose one of"
  say "the options below:"
  echo
  say "  -- 1 to find out where are you"
  say "  -- 2 to see what is here"
  say "  -- 3 to create a new place"
  say "  -- 4 to travel to a place"
  say "  -- 5 to destroy the place"
  say "  -- 6 to leave"
  echo
  ask "So, what would it be? " choice
  echo
}

function where_are_you_func {
  say "You want to know where are you?"
  say "  You are in "$PWD""
  echo
}

function what_is_here_func {
  say "You want to know what is here? There is:"
  say `ls`
  echo
}

function create_place_func {
  say "You want to create a new place? Then you need to give it a name"
  ask "Enter the name of the new place: " dir_name
  mkdir -p $dir_name
  say "$dir_name created!"
  echo
}

while [ $choice != $leave ]
do
  the_offer
  case $choice in
    $where_are_you)
      where_are_you_func
      ;;
    $what_is_here)
      what_is_here_func
      ;;
    $create_place)
      create_place_func
      ;;
    *)
      echo "heh"
      ;;
  esac
done
