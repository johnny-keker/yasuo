\documentclass[12pt, a4paper]{article}
\usepackage[a4paper, includeheadfoot, mag=1000, left=2cm, right=1.5cm, top=1.5cm, bottom=1.5cm, headsep=0.8cm, footskip=0.8cm]{geometry}
% Fonts
\usepackage{fontspec, unicode-math}
\setmainfont[Ligatures=TeX]{CMU Serif}
\setmonofont{CMU Typewriter Text}
\usepackage[english, russian]{babel}
% Indent first paragraph
\usepackage{indentfirst}
\setlength{\parskip}{5pt}
% Diagrams
\usepackage{graphicx}
\usepackage{float}
% Page headings
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\setlength{\headheight}{16pt}
%\newfontfamily\namefont[Scale=1.2]{Gloria Hallelujah}
\fancyhead{}


\usepackage{listings}
\lstdefinestyle{lablisting}{
  basicstyle=\scriptsize\ttfamily,
  numbers=left,
  stepnumber=1,
  otherkeywords={EOF, O\_RDONLY, STDIN\_FILENO, STDOUT\_FILENO, STDERR\_FILENO},
  numbersep=10pt,
  showspaces=false,
  showstringspaces=false
}

\begin{document}

% Title page
\begin{titlepage}
\begin{center}

\textsc{National Research University ITMO\\[4mm]
Faculty of Software Engineering and Compyter Systems}
\vfill
\textbf{Labwork №4 [4]\\[4mm]
System Software Fundamentals\\[16mm]
}
Ivan Sarzhevskiy
\\[2mm]Group P3302
\vfill
Saint Petersburg\\[2mm]
2019 г.

\end{center}
\end{titlepage}

\section*{Assignment}

\subsection*{Part 1}

Implement \textit{tail} utility using C and raw syscalls.

\subsubsection*{Requirements}

\begin{enumerate}
\item I/O only via \verb|read(2)| and \verb|write(2)|.
\item Multiple input files standard input handling.
\item Error handling.
\end{enumerate}

\subsection*{Part 2}

Rewrite the same program in Perl.

\subsubsection*{Requirements}

\begin{enumerate}
\item Use \verb|use strict; use warnings qw(FATAL all);| pragmas.
\item Enable \textit{taint mode} with \verb|#!/usr/bin/perl -T|.
\end{enumerate}

\subsection*{Part 3}

Implement \textit{xargs} utility using C and raw syscalls.

\section*{Code Listing}

\setmonofont{Fira Mono}

\subsection*{Makefile}

\lstinputlisting[style=lablisting]{Makefile}
\newpage
\subsection*{tail (C implementation)}

\lstinputlisting[language=c, style=lablisting]{keker_tail.c}
\newpage
\subsection*{tail (Perl implementation)}

\lstinputlisting[language=perl, style=lablisting]{keker_tail.pl}

\subsection*{xargs (C implementation)}

\lstinputlisting[language=c, style=lablisting]{keker_xargs.c}
\end{document}
